<h2>Edit profile page</h2>
<div class="container-main">
  <div class="container-mini">
    <img class="card-image" [src]="imageSrc" alt="Profile image" />
    <div class="file-upload">
      <br />
      <mat-label>Insert new profile picture </mat-label><br />
      <input type="file" (change)="onFileSelected($event)" />
    </div>
  </div>
  <div>
    <div>MY PROFILE</div>
    <br />
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input
          matInput
          type="password"
          formControlName="password"
          placeholder="Password"
          required
        />
        <mat-error *ngIf="userForm.get('password')?.hasError('required')"
          >Password is required</mat-error
        >
        <mat-error *ngIf="userForm.get('password')?.hasError('minlength')"
          >Password must be longer!</mat-error
        >
        <mat-error *ngIf="userForm.get('password')?.hasError('maxlength')"
          >Password must be shorter!</mat-error
        >
      </mat-form-field>
      <br />
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input
          matInput
          type="email"
          formControlName="mail"
          placeholder="Email"
          required
        />
        <mat-error *ngIf="userForm.get('mail')?.hasError('required')"
          >Email is required!</mat-error
        >
        <mat-error *ngIf="userForm.get('mail')?.hasError('email')"
          >Invalid email format!</mat-error
        >
        <mat-error *ngIf="userForm.get('mail')?.hasError('maxlength')"
          >Email is too long!</mat-error
        >
      </mat-form-field>
      <br />
      <mat-form-field appearance="outline">
        <mat-label>First Name</mat-label>
        <input matInput formControlName="firstName" placeholder="First Name" />
        <mat-error *ngIf="userForm.get('firstName')?.hasError('required')"
          >First Name is required</mat-error
        >
        <mat-error *ngIf="userForm.get('firstName')?.hasError('maxlength')"
          >First Name is too long!</mat-error
        >
      </mat-form-field>
      <br />
      <mat-form-field appearance="outline">
        <mat-label>Last Name</mat-label>
        <input matInput formControlName="lastName" placeholder="Last Name" />
        <mat-error *ngIf="userForm.get('lastName')?.hasError('required')"
          >Last Name is required</mat-error
        >
        <mat-error *ngIf="userForm.get('lastName')?.hasError('maxlength')"
          >Last Name is too long!</mat-error
        >
      </mat-form-field>
      <br />
      <mat-form-field appearance="outline">
        <mat-label>City</mat-label>
        <input matInput formControlName="city" placeholder="City" />
        <mat-error *ngIf="userForm.get('city')?.hasError('required')"
          >City is required</mat-error
        >
        <mat-error *ngIf="userForm.get('city')?.hasError('maxlength')"
          >City is too long!</mat-error
        >
      </mat-form-field>
      <br />
      <mat-form-field appearance="outline">
        <mat-label>Card</mat-label>
        <input matInput formControlName="card" placeholder="Card" />
        <mat-error *ngIf="userForm.get('card')?.hasError('maxlength')"
          >Card is too long!</mat-error
        ><mat-error *ngIf="userForm.get('card')?.hasError('minlength')"
          >Card is too short!</mat-error
        >
      </mat-form-field>
      <br />
      <button mat-raised-button color="primary" type="submit">
        Update profile
      </button>
      <mat-form-field appearance="outline" style="visibility: hidden">
        <mat-label>Profile Image ID</mat-label>
        <input
          matInput
          type="number"
          formControlName="profileImageId"
          placeholder="Profile Image ID"
          style="visibility: hidden"
        />
      </mat-form-field>
      <br />
    </form>
  </div>
</div>
<div class="container">
  <h1>My programs</h1>
  <mat-card *ngFor="let program of programs" class="program-card">
    <mat-card-title>{{ program.name }}</mat-card-title>
    <mat-card-content>
      <p>Description: {{ program.description }}</p>
      <p>
        Price: <span class="value"> {{ program.price }}</span> KM Level:
        <span class="value">{{ program.level }} </span> Duration:
        <span class="value">{{ program.duration }} </span> Contact:
        <span class="value"> {{ program.contact }} </span> Location:
        <span class="value"> {{ program.locationName }} </span> Instructor:
        <span class="value">{{ program.instructorName }} </span> Category:
        <span class="value"> {{ program.categoryName }} </span>
      </p>
      @if(programsStatus[program.id]){
      <p>
        Status:
        <span class="value">
          {{ programsStatus[program.id].paid ? "Paid" : "Not Paid" }}
        </span>
      </p>
      } @if(programsStatus[program.id] !== undefined &&
      programsStatus[program.id].paid !== undefined){ Payment method:
      {{ programsStatus[program.id].paymentMethodName }}
      }
    </mat-card-content>
  </mat-card>
</div>
